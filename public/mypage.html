<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
      xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <title>MembersQ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="membersq">

    <!-- Le styles -->
   <link href="common/css/bootstrap.css" rel="stylesheet">

    <link href="common/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="common/css/jquery-ui-1.10.1.flick.css" rel="stylesheet">
    <link href="common/css/jquery.multiselect.css" rel="stylesheet">
    <link href="common/css/jquery.multiselect.filter.css" rel="stylesheet">
    <link rel="stylesheet" href="common/css/validationEngine.jquery.css" type="text/css"/>
    <link href="common/css/jquery.pnotify.default.css" media="all" rel="stylesheet" type="text/css" />
    <!-- Include this file if you are using Pines Icons. -->
    <link href="common/css/jquery.pnotify.default.icons.css" media="all" rel="stylesheet" type="text/css" />
    <style type="text/css">

        html,
        body {
            height: 100%;
            /* The html and body elements cannot have any padding or margin. */
        }

            /* Wrapper for page content to push down footer */
        #wrap {
            min-height: 100%;
            height: auto !important;
            height: 100%;
            /* Negative indent footer by it's height */
            margin: 0 auto -40px;
        }

            /* Set the fixed height of the footer here */
        #push,
        #footer {
            height: 40px;
        }
        #footer {
            background-color: #f5f5f5;
        }

            /* Lastly, apply responsive CSS fixes as necessary */
        @media (max-width: 767px) {
            #footer {
                margin-left: -20px;
                margin-right: -20px;
                padding-left: 20px;
                padding-right: 20px;
            }
            #map-canvas { height: 350px;width: 400px  }
        }
        .container .credit {
            margin: 10px 0;
        }
        .cluster{
            color: #FFFFFF;
            text-align:center;
            font-family: 'Arial, Helvetica';
            font-size:11px;
            font-weight:bold;
        }
        .cluster-1{
            background-image:url(common/img/m1.png);
            line-height:53px;
            width: 53px;
            height: 52px;
        }
        .cluster-2{
            background-image:url(common/img/m2.png);
            line-height:53px;
            width: 56px;
            height: 55px;
        }
        .cluster-3{
            background-image:url(common/img/m3.png);
            line-height:66px;
            width: 66px;
            height: 65px;
        }

        .circle {

            padding: 10px;
            display: inline-block;
            -moz-border-radius:50%;
            -webkit-border-radius: 50%;
            border-radius:50%;
            vertical-align: middle;
            background-color:#7FFF00;
            font-size:2em
        }
        #map-canvas { height: 350px; width: 750px }


        #mapCanvas label {
            width: auto; display:inline;
        }


    </style>


    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="common/ico/favicon.png">
</head>

<body>
<div id="wrap">

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="/">MembersQ</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                     <li  class="active"><a href="/home">My Dashboard</a></li>
                </ul>

                <ul class="nav pull-right">
                    <li class="active"><a href="javascript:" ><span id="user_name" ></span></a></li>
                    <li><a href="javascript:" id="logout-link">Logout</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </div>
</div>
<div class="container" id="mypage-container">
<div class="row-fluid" style="margin-top: 5%">

    <div class="span 12">
        <div class="row-fluid">
            <div class="inline">
                <ul class="inline">
                    <li class="span2">
                        <button class="btn btn-large btn-block" type="button" id="qr-button">
                            <img src="/common/img/qrbutton_img.png" alt="show my qr" width="25px"  > QR</button>

                    </li>
                    <li class=" span4">
                        <!-- 
                        Disabling top search for first version
                        <form class="navbar-search pull-left">
                            <div class="input-prepend input-append">
                                <span class="add-on"><i class="icon-search"></i></span>
                                <input id="top-search" type="text" class="input-xlarge" placeholder="Find places near you" >
                            </div>
                        </form>
                        -->
                        <span  id="top-info"></span>
                    </li>

                </ul>

            </div>

        </div>

    </div>
</div>

<div class="container-fluid" >
<div class="row-fluid">
<div class="span12  tabbable tabs-left">
    <ul class="nav nav-tabs span2" id="leftTab">
        <li class="nav-header">Navigate</li>
        <!-- 
            Disabling Account section
            <li class="active"><a href="#account" data-toggle="tab"><i class="icon-home"></i>Account</a></li>
        -->
        <li class="active"><a href="#discover" data-toggle="tab"><i class="icon-map-marker"></i>Discover Local</a></li>
        <li><a href="#profile" data-toggle="tab"><i class="icon-user"></i>Profile</a></li>
        <li><a href="#subscription-tab" data-toggle="tab"><i class="icon-bookmark"></i>Subscription</a></li>
    </ul>
    <div class="tab-content">
        
        <div class="tab-pane" id="account">
            <p>I'm in Section 1.</p>
        </div>
        
        <div class="tab-pane active" id="discover">
            <div class="row-fluid">
                <form class="form-inline span8">
                    <button class="btn btn-inverse" type="button" id="search-local-button">Search Within</button>
                    <select style="width:90px" 
                        data-bind="options: availableRadius, value :selectedRadius">
                    </select>
                    <select style="width:70px" 
                        data-bind="options: availableRadiusUnits, value :selectedRadiusUnit">
                    </select>
                   
                    <!--
                       Removing search by query string for now
                       <div class="input-append">
                           
                            
                            <input class="input-large" id="appendedInputButtons" type="text" data-bind="value: searchLocalQuery">
                            
                            <button class="btn" type="button" id="search-local-button">Search</button>
                        </div>
                       
                        <br>
                        <select  data-bind="options: availableCategories, selectedOptions: chosenCategories"
                                 multiple="multiple" id="search-tags" name="search-tags" >
                        </select>
                     -->

                </form>

            </div>
            <br>
            <div class="tabbable">
                <ul class="nav nav-tabs" id="localTab">
                    <li class="active">
                        <a href="#businessList" data-toggle="tab" >List</a>
                    </li>
                    <li>
                        <a href="#businessMap" data-toggle="tab">Map</a>
                    </li>

                </ul>
                <div class="tab-content">
                    <div class="alert hide" id="noResultAlert" >
                        <strong>No results were found!</strong> Please increase your search radius.
                    </div>
                    <div class="tab-pane" id="businessList">
                        <table class="table table-hover" >
                            <thead>
                            <tr>
                                <th>Business</th>
                                <th>Subscription</th>
                            </tr>
                            </thead>
                            <tbody data-bind="foreach: {data: localBusinesses}">
                            <tr>

                                <td>
                                    <div class="span3">
                                   
                                        <span data-bind="text: alpha"  class="circle" ></span>
                                        <img src="/common/img/60x60.jpg" class="img-rounded" data-bind="click: $parent.loadBusiness">
                                    
                                    </div>
                                    <div class="span4">
                                        <a href="javascript:" data-bind="text: name, click: $parent.loadBusiness"></a>
                                        <br>                                        
                                        <a href="javascript:" data-bind="click: $parent.openMapLink">
                                        <i class="icon-map-marker"></i>map</a>
                                        <br>
                                        <address>
                                            <span data-bind="text: locations[0].street"> </span><br>
                                            <span data-bind="text: locations[0].city"> </span>,
                                            <span data-bind="text: locations[0].state_prov_code"> </span>
                                        </address>
                                        
                                    </div>
                                </td>
                                <td class="span2">
                                    <span class="subscribeLink" data-bind=" attr: {title: _id}">
                                    <a href="javascript:" data-bind="click: $parent.subscribeToBusiness">
                                            <i class="icon-plus-sign"></i> <small>subscribe</small>
                                    </a>    
                                    </span>
                                    
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane" id="businessMap">
                        <div id="map-canvas" class="google-maps"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="profile">
            <div class="alert alert-success  hide" id="updateSuccessAlert" >
                <strong>Success!</strong> profile was updated.
            </div>
            <form class="form-horizontal" id="profile-form">

                <legend>Personal Information</legend>
                <div class="row-fluid">
                    <div class="span10">

                        <div class="row-fluid">
                            <div class="span5">
                                <div class="control-group">
                                    <label class="control-label" for="firstName">First Name</label>
                                    <div class="controls">
                                        <input type="text" id="firstName" placeholder="first name" class="validate[custom[onlyLetterSp]]" data-bind="value: personProfile().first_name">
                                    </div>
                                </div>
                            </div><!--/span-->
                            <div class="span5">
                                <div class="control-group">
                                    <label class="control-label" for="lastName">Last Name</label>
                                    <div class="controls">
                                        <input type="text" id="lastName" placeholder="last name" class="validate[custom[onlyLetterSp]]" data-bind="value: personProfile().last_name">
                                    </div>
                                </div>
                            </div><!--/span-->
                        </div><!--/row-->
                        <div class="row-fluid">
                            <div class="span5">
                                <div class="control-group">
                                    <label class="control-label" for="gender">Gender</label>
                                    <div class="controls">
                                        <select id="gender" data-bind="options: ['male','female'], value: personProfile().gender">

                                        </select>
                                    </div>
                                </div>
                            </div><!--/span-->
                            <div class="span5">
                                <div class="control-group">
                                    <label class="control-label" for="dateOfBirth">Date of Birth</label>
                                    <div class="controls">
                                        <input type="text" id="dateOfBirth" placeholder="YYYY-MM-DD"  class="validate[custom[date]]" data-bind="value: dob">
                                    </div>
                                </div>
                            </div><!--/span-->
                        </div><!--/row-->
                        <legend>Contact</legend>
                        <div class="row-fluid">
                            <div class="span5">
                                <div class="control-group">
                                    <label class="control-label" for="email">E-Mail</label>
                                    <div class="controls">
                                        <input type="text" id="email" placeholder="email address" disabled data-bind="value: personProfile().email">
                                    </div>
                                </div>
                            </div><!--/span-->
                            <div class="span5">
                                <div class="control-group">
                                    <label class="control-label" for="phone">Phone</label>
                                    <div class="controls">
                                        <input type="text" id="phone" placeholder="phone number" class="validate[custom[phone]]" data-bind="value: personProfile().phone">
                                    </div>
                                </div>
                            </div><!--/span-->
                        </div>
                        <legend>Location</legend>
                        <div class="row-fluid">
                            <div class="span5">
                                <div class="control-group">
                                    <label class="control-label" for="city">City</label>
                                    <div class="controls">
                                        <select id="city" data-bind="options: ['Boston','Toronto'], value: personProfile().location">
                                        </select>
                                    </div>
                                </div>
                            </div><!--/span-->
                            
                        </div>
                        <div class="span2 offset9">
                            <a href="javascript:" class="btn btn-success btn-block" id="profileUpdateButton">Update</a>
                        </div>
                        <!-- Disabling Address update for now
                        <fieldset>
                            <legend>Address</legend>
                            <div class="row-fluid">
                                <div class="span5">
                                    <div class="control-group">
                                        <label class="control-label" for="street">Street</label>
                                        <div class="controls">
                                            <input type="text"  id="street" data-bind="value: personProfile().address.street">
                                        </div>
                                    </div>
                                </div>
                                <div class="span4">
                                    <div class="control-group">
                                        <label class="control-label" for="apt">Apt</label>
                                        <div class="controls">
                                            <input type="text" id="apt" data-bind="value: personProfile().address.apt">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span5">
                                    <div class="control-group">
                                        <label class="control-label" for="city">City</label>
                                        <div class="controls">
                                            <input type="text" id="city" data-bind="value: personProfile().address.city">
                                        </div>
                                    </div>
                                </div>
                                <div class="span5">
                                    <div class="control-group">
                                        <label class="control-label" for="state">State</label>
                                        <div class="controls">
                                            <input type="text" id="state" data-bind="value: personProfile().address.state_prov">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span5">
                                    <div class="control-group">
                                        <label class="control-label" for="postCode">Postal Code</label>
                                        <div class="controls">
                                            <input type="text" id="postCode" data-bind="value: personProfile().address.postal_code">
                                        </div>
                                    </div>
                                </div>
                                <div class="span5">
                                    <div class="control-group">
                                        <label class="control-label" for="country">Country</label>
                                        <div class="controls">
                                            <select id="country"></select>
                                        </div>
                                    </div>

                                </div><
                            </div>
                        </fieldset>
                        -->
                        
                    </div><!--/span-->

                </div><!--/row-->
            </form>

        </div>
        <div class="tab-pane" id="subscription-tab">
            <div class="span8">
                <li class="nav-header">Subscriptions</li>

                <ul data-bind="foreach: subscribedBusinesses">
                    <div data-bind="if: active">
                    <li>
                        
                            <a href="#" data-bind="text: business_name,click: $parent.loadBusiness"></a>
                            <a href="#" data-bind="click: $parent.unsubscribe" style="color:red"><small>(remove)</small></a>
                        
                    </li>
                    </div>
                    
                </ul>

            </div>
        </div>
    </div>
</div>
</div>
</div>
</div>
<div id="push"></div>
</div>
<div id="qr-modal" title="Customer Code">

</div>
<div id="subscription-modal" title="Business Information">

    <address>
        <strong><span data-bind="text: businessProfile().name" ></span></strong>
        <ul class="inline">
            <li><small><span data-bind="text: businessProfile().contact_email"></span></small></li>
            <li><small>Phone:<span data-bind="text: businessProfile().phone"> </span></small></li>
        </ul>

        <ul data-bind="foreach: businessProfile().locations">
            <li>
                    <i class="icon-home"></i><small><span data-bind="text: street"> </span>,
                    <!-- ko if: $data.hasOwnProperty("unit_suite") -->
                    <span data-bind="text: unit_suite"></span>
                    <!-- /ko -->
                    <br>
                    <span data-bind="text: city"> </span>,
                    <span data-bind="text: state_prov_code"></span></small>

            </li>

        </ul>

    </address>
    <div class="well">
        <table class="table table-condensed">
            <thead>
            <tr>
                <th>Rewards</th>
                <th></th>


            </tr>
            </thead>
            <tbody data-bind="foreach:  {data:businessBenefits}">
                <!-- ko if: active === true -->
                    <tr>
                        <td>
                            <span data-bind="text: name"> </span>
                        </td>
                        <td>
                            <i class="icon-certificate"></i>
                            <span data-bind="text: point_value"> </span>
                        </td>

                    </tr>
                <!-- /ko -->
            </tbody>
        </table>
    </div>

</div>
<div id="dialog-confirm-modal" title="Please confirm">
    <p >
        <i class="icon-info-sign" style="font-size:24px"></i>
        <span id="dialog-confirm-text" > Are you sure?</span>
    </p>
</div>

<div id="footer">
    <div class="container">
        <p class="muted credit">Copyright MembersQ 2013 </p>
    </div>
</div>

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.1.min.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
<script src="http://maps.google.com/maps/api/js?key=AIzaSyCHiH71kEIyL_8zU_8WwJV6hjzRnH5oqiM&sensor=false"></script>
<script src="/common/js/lib/knockout.mapping-2.4.js"></script>
<script src="/common/js/lib/geo.js" type="text/javascript" charset="utf-8"></script>
<script src="/common/js/lib/jquery-ui-1.10.1.custom.js"></script>
<script src="/common/js/lib/jquery.multiselect.min.js"></script>
<script src="/common/js/lib/jquery.multiselect.filter.js"></script>
<script src="/common/js/lib/jquery.pnotify.min.js" type="text/javascript"></script>
<script src="/common/js/lib/jquery.qrcode.min.js" type="text/javascript" ></script>
<script src="/common/js/lib/gmap3.min.js" type="text/javascript"></script>
<script src="/common/js/lib/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8"></script>
<script src="/common/js/lib/jquery.validationEngine.js" type="text/javascript" charset="utf-8"></script>
<script src="/common/js/global-vars.js"></script>
<script src="/common/js/mypage.js"></script>

</body>
</html>